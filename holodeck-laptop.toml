[package]
name = "holodeck-laptop"
version = "3.1.0"
release = 1
description = "configuration of laptop"
requires = [
	"holo-users-groups",

	"hologram-base-arch",
	"hologram-dev",
	"hologram-multimedia",

	"android-file-transfer",
	"intel-ucode",
	"openssh",
	"wpa_supplicant",
	"xorg-xrandr", # for peripheral screens
]


# user

[[group]]
name = "sudo"
system = false

[[user]]
name    = "laerling"
system  = false
comment = "Benjamin Ludwig"
uid     = 1000
groups  = [ "audio", "video", "sudo" ]
home    = "/home/laerling"
shell   = "/bin/bash"

[[directory]]
path = "/home/laerling"
mode = "0700"
owner = "laerling"
group = "laerling"


# screen setup

[[file]]
path = "/usr/share/holo/files/99-laptop/etc/X11/xinit/xinitrc.holoscript"
mode = "0755"
contentFrom = "holoscripts/xinitrc.pl"

[[file]]
path = "/usr/share/holo/files/99-laptop/etc/systemd/logind.conf.holoscript"
mode = "0755"
contentFrom = "holoscripts/logind.conf.sh"


# networking

# WLAN
[[file]]
path = "/etc/wpa_supplicant/wpa_supplicant-wlp2s0.conf"
contentFrom = "files/wpa_supplicant-wlp2s0.conf"
[[symlink]]
# as created by `systemctl enable wpa_supplicant@wlp2s0`
path = "/etc/systemd/system/multi-user.target.wants/wpa_supplicant@wlp2s0.service"
target = "/usr/lib/systemd/system/wpa_supplicant@.service"

# dhcp
[[symlink]]
# as created by `systemctl enable dhcpcd`
path = "/etc/systemd/system/multi-user.target.wants/dhcpcd.service"
target = "/usr/lib/systemd/system/dhcpcd.service"

# DNS
[[symlink]]
# as created by `systemctl enable systemd-resolved`
path = "/etc/systemd/system/dbus-org.freedesktop.resolve1.service"
target = "/usr/lib/systemd/system/systemd-resolved.service"
[[symlink]]
# as created by `systemctl enable systemd-resolved`
path = "/etc/systemd/system/multi-user.target.wants/systemd-resolved.service"
target = "/usr/lib/systemd/system/systemd-resolved.service"


# storage and mount points

[[file]]
path = "/usr/share/holo/files/99-laptop/etc/fstab.holoscript"
mode = "0755"
contentFrom = "holoscripts/fstab.sh"

[[directory]]
path = "/mnt/archive"
mode = "0700"
owner = 1000
group = 1000

# script for mounting archive
[[file]]
path = "/usr/bin/archive"
mode = "0555"
contentFrom = "files/archive.sh"
# user must be able to call script without using sudo
[[action]]
on = "setup"
script = "chmod +s /usr/bin/archive"

[[directory]]
path = "/mnt/backup"
mode = "0700"
owner = 1000
group = 1000

# mount points for USB ports, because why not

[[directory]]
path = "/mnt/usb0"
mode = "0700"
owner = 1000
group = 1000

[[directory]]
path = "/mnt/usb1"
mode = "0700"
owner = 1000
group = 1000

[[directory]]
path = "/mnt/usb2"
mode = "0700"
owner = 1000
group = 1000
